# =============================================================
# ReunIA Environment Variables
# Copy this file to .env.local and fill in your values.
# NEVER commit .env.local to version control.
# =============================================================

# ---------------------------------------------------------------
# DATABASE (PostgreSQL 16 + pgvector + PostGIS)
# ---------------------------------------------------------------
DATABASE_URL="postgresql://reunia_app:CHANGE_ME@localhost:5432/reunia_dev?schema=public"
# For read-only replicas (optional)
DATABASE_READ_URL="postgresql://reunia_readonly:CHANGE_ME@localhost:5432/reunia_dev?schema=public"
# Direct connection (used by Prisma migrations, bypasses pooler)
DIRECT_DATABASE_URL="postgresql://reunia_app:CHANGE_ME@localhost:5432/reunia_dev?schema=public"

# ---------------------------------------------------------------
# REDIS (Cache, Sessions, Job Queues)
# ---------------------------------------------------------------
REDIS_URL="redis://:CHANGE_ME@localhost:6379"
# Separate connections for BullMQ (recommended for high-throughput queues)
REDIS_QUEUE_URL="redis://:CHANGE_ME@localhost:6379/1"

# ---------------------------------------------------------------
# AUTHENTICATION (JWT RS256)
# ---------------------------------------------------------------
# Generate with: openssl genrsa -out private.pem 2048
# Then: openssl rsa -in private.pem -pubout -out public.pem
# Paste the full PEM content (newlines as \n)
JWT_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END RSA PRIVATE KEY-----"
JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nYOUR_PUBLIC_KEY_HERE\n-----END PUBLIC KEY-----"
JWT_ACCESS_TOKEN_TTL="900"        # 15 minutes (seconds)
JWT_REFRESH_TOKEN_TTL="604800"    # 7 days (seconds)

# Encryption key for MFA secrets (AES-256-GCM, 32 bytes base64-encoded)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY="CHANGE_ME_32_BYTES_BASE64_ENCODED"

# ---------------------------------------------------------------
# APPLICATION
# ---------------------------------------------------------------
NODE_ENV="development"
NEXT_PUBLIC_APP_URL="http://localhost:3000"
# API base URL (used by client-side code)
NEXT_PUBLIC_API_URL="http://localhost:3000/api/v1"

# ---------------------------------------------------------------
# CLOUDINARY (Photo Storage & Transformations)
# ---------------------------------------------------------------
CLOUDINARY_CLOUD_NAME="your_cloud_name"
CLOUDINARY_API_KEY="your_api_key"
CLOUDINARY_API_SECRET="your_api_secret"
# Upload preset for unsigned uploads (create in Cloudinary dashboard)
CLOUDINARY_UPLOAD_PRESET="reunia_photos"
# Folder structure: reunia/{case_id}/{image_id}
CLOUDINARY_BASE_FOLDER="reunia"

# ---------------------------------------------------------------
# FACE MATCH ENGINE (Python FastAPI microservice)
# ---------------------------------------------------------------
FACE_ENGINE_URL="http://localhost:8001"
FACE_ENGINE_API_KEY="CHANGE_ME_INTERNAL_KEY"
# Timeout for face match requests (milliseconds)
FACE_ENGINE_TIMEOUT="5000"

# ---------------------------------------------------------------
# WHATSAPP BUSINESS API (Alerts)
# ---------------------------------------------------------------
WHATSAPP_API_URL="https://graph.facebook.com/v18.0"
WHATSAPP_PHONE_NUMBER_ID="your_phone_number_id"
WHATSAPP_ACCESS_TOKEN="your_access_token"
WHATSAPP_WEBHOOK_VERIFY_TOKEN="CHANGE_ME_WEBHOOK_TOKEN"

# ---------------------------------------------------------------
# EXTERNAL DATA SOURCES
# ---------------------------------------------------------------
# NCMEC Poster API (requires registration at missingkids.org)
NCMEC_API_KEY=""
NCMEC_API_URL="https://api.missingkids.org/missingkids/servlet/JSONDataServlet"

# FBI Wanted API (no auth required — public API)
FBI_API_URL="https://api.fbi.gov/wanted/v1/list"

# Interpol Yellow Notices (no auth required — public API)
INTERPOL_API_URL="https://www.interpol.int/How-we-work/Notices/View-Red-Notices"

# OpenSanctions (bulk download — no auth for basic tier)
OPENSANCTIONS_API_URL="https://api.opensanctions.org"
OPENSANCTIONS_API_KEY=""  # Optional: higher rate limits with key

# GDELT (no auth required)
GDELT_API_URL="https://api.gdeltproject.org/api/v2"

# ---------------------------------------------------------------
# EMAIL (Verification & Notifications)
# ---------------------------------------------------------------
# SMTP settings (use Postmark, SendGrid, or similar for production)
SMTP_HOST="smtp.example.com"
SMTP_PORT="587"
SMTP_USER="noreply@reunia.org"
SMTP_PASS="CHANGE_ME"
SMTP_FROM="ReunIA <noreply@reunia.org>"

# ---------------------------------------------------------------
# MONITORING (Optional — add Sentry for error tracking)
# ---------------------------------------------------------------
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"

# ---------------------------------------------------------------
# LOGGING
# ---------------------------------------------------------------
LOG_LEVEL="info"  # trace | debug | info | warn | error | fatal
LOG_PRETTY="true"  # Pretty-print in development, JSON in production
